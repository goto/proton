syntax = "proto3";

package gotocompany.assets.v1beta2;

import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/goto/proton/assets/v1beta2;assetsv1beta2";
option java_outer_classname = "MetricProto";
option java_package = "com.gotocompany.assets";

// A metric is a timeseries aggregation over a table that supports zero or more dimensions.
message Metric {
  // Metric's definition. Can be in a text describing the metrics or a formula.
  string definition = 1;

  // A query on how to calculate and generate the metric.
  // Metric is not defined by where it is stored, but instead on how it is generated.
  string query = 2;

  // Team owning the metric's definition.
  string team = 3;

  // Optional: This field can be utilised to group multiple metrics.
  // We can utilise this field to group the following two different metrics "GMV Product A" and "GMV Product B".
  // In the example above, this "group" field can be "GMV" for both metrics.
  string group = 4;

  // Optional: This field can be used as a flag for metric verification
  bool is_verified = 5;

  // List of attributes the model has.
  google.protobuf.Struct attributes = 10;

  // The timestamp of the metric's creation.
  google.protobuf.Timestamp create_time = 101;

  // The timestamp when the metric was last modified.
  google.protobuf.Timestamp update_time = 102;
}
